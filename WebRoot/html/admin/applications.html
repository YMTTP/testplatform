<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="/css/reset.css" rel="stylesheet">
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/admin/layout.css" rel="stylesheet">
    <link href="/css/admin/applications.css" rel="stylesheet">
    <script type="text/javascript" src="/lib/jquery.js"></script>
    <script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/bootstrap/js/jquery.bootpag.min.js"></script>
    <script type="text/javascript" src="/lib/avalon.js"></script>
    <script type="text/javascript" src="/js/admin/common/common.js"></script>
    <script type="text/javascript" src="/js/admin/applications.js"></script>
    <title>应用管理</title>
</head>
<body ms-controller="vm">
<!-- ADMIN HEAD -->
<div ms-include-src="'/html/admin/header.txt'"></div>
<!-- Content -->
<div class="container">
    <div ms-controller="applicationvm" id="application">
        <div class="tabbable">
            <ul class="nav nav-tabs" id="applicationTab">
                <li class="active">
                    <a href="#applicationShow" data-toggle="tab">应用列表</a>
                </li>
                <li>
                    <a href="#applicationAdd" data-toggle="tab">添加应用</a>
                </li>
                <li>
                    <a href="#applicationTypeShow" data-toggle="tab">应用类型列表</a>
                </li>
                <li>
                    <a href="#applicationTypeAdd" data-toggle="tab">添加应用类型</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="applicationShow">
                    <table class="table table-bordered table-condensed">
                        <thead>
                        <tr>
                            <td>ID</td>
                            <td>应用域名</td>
                            <td>名称</td>
                            <td>应用类型</td>
                            <td>所属部门</td>
                            <td>备注</td>
                            <td ms-repeat="envsList">{{el.name}}</td>
                        </tr>
                        </thead>
                        <tr ms-repeat="applicationsList">
                            <td>{{el.id}}</td>
                            <td>{{el.domain}}</td>
                            <td>{{el.name}}</td>
                            <td>{{el.applicationtype.type}}</td>
                            <td>{{el.department.name}}</td>
                            <td>{{el.remark}}</td>
                            <td ms-repeat="el.appsEnvidArr">
                                <div ms-if="el.exsit">
                                    <a ms-href="'/html/admin/appenv.html?appid='+el.appid+'&envid='+el.envid"><span class="glyphicon glyphicon-link" aria-hidden="true"></span></a>
                                </div>
                                <div ms-if="!el.exsit">添加</div>
                            </td>
                        </tr>
                    </table>

                    <div class="text-center">
                        <p id="pagination"></p>
                    </div>
                </div>
                <div class="tab-pane" id="applicationAdd">
                    <div class="input-group">
                        <span class="input-group-addon">应用域名:</span>
                        <input class="form-control" ms-duplex="newAppDomain">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">名称:</span>
                        <input class="form-control" ms-duplex="newAppName">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">应用类型:</span>
                        <select class="form-control" ms-duplex="newAppTypeId">
                            <option value="" selected>请选择</option>
                            <option ms-repeat="applicationsList" ms-attr-value="el.id"> {{el.type}}</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">所属部门:</span>
                        <select class="form-control" ms-duplex="newAppDepId">
                            <option value="" selected>请选择</option>
                            <option ms-repeat="depList" ms-attr-value="el.id"> {{el.name}}</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">备注:</span>
                        <input class="form-control" ms-duplex="newAppRemark">
                    </div>
                    <div>
                        <button type="button" class="btn btn-primary" ms-click="addApp">
                            提交
                        </button>
                    </div>
                </div>
                <div class="tab-pane" id="applicationTypeShow">
                    <table class="table table-bordered table-condensed">
                        <thead>
                        <tr>
                            <td>ID</td>
                            <td>应用类型</td>
                            <td>备注</td>
                            <td>修改</td>
                            <td>删除</td>
                        </tr>
                        </thead>
                        <tr ms-repeat="applicationsTypeList">
                            <td class="appIdTd">
                                {{el.id}}
                            </td>
                            <td class="appTypeTd">
                                <input class="form-control" ms-attr-readonly="el.readonly" ms-duplex="el.type">
                            </td>
                            <td class="appTypeRemarkTd">
                                <input class="form-control" ms-attr-readonly="el.readonly" ms-duplex="el.remark">
                            </td>
                            <td class="iconTd" ms-class="{{el.modifyClass}}">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"
                                      ms-click="preModifyAppType($index)"></span>
                            </td>
                            <td class="iconTd" ms-class="{{el.saveClass}}">
                                <span class="glyphicon glyphicon-floppy-save" aria-hidden="true"
                                      ms-click="modifyAppType($index,el.id,el.type,el.remark)"></span>
                                <span class="glyphicon glyphicon-remove" aria-hidden="true"
                                      ms-click="cancleModifyAppType($index)"></span>
                            </td>
                            <td class="iconTd">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"
                                      ms-click="removeAppType(el.id)"></span>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="tab-pane" id="applicationTypeAdd">
                    <div class="input-group">
                        <span class="input-group-addon">应用类型:</span>
                        <input class="form-control" ms-duplex="newAppType">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">备注:</span>
                        <input class="form-control" ms-duplex="newAppTypeRemark">
                    </div>
                    <div>
                        <button type="button" class="btn btn-primary" ms-click="addAppType">
                            提交
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<!--ADMIN FOOTER -->
<div ms-include-src="'/html/admin/footer.txt'"></div>
</body>
</html>